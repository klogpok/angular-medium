"use strict";(self.webpackChunkangular_medium=self.webpackChunkangular_medium||[]).push([[609],{9609:(L,u,n)=>{n.r(u),n.d(u,{SettingsModule:()=>J});var c=n(4755),l=n(3753),r=n(8784);const g=e=>e.settings,d=(0,r.P1)(g,e=>e.isSubmitting),p=(0,r.P1)(g,e=>e.validationErrors);var f=n(9300),h=n(5847),b=n(479),t=n(2223),s=n(5030),S=n(4753);function v(e,i){if(1&e&&(t._UZ(0,"app-backend-error-messages",16),t.ALo(1,"async")),2&e){const o=t.oxw(2);t.Q6J("backendErrors",t.lcZ(1,1,o.backendErrors$))}}function U(e,i){if(1&e){const o=t.EpF();t.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"h1",5),t._uU(5,"Your Settings"),t.qZA(),t.YNc(6,v,2,3,"app-backend-error-messages",6),t.ALo(7,"async"),t.TgZ(8,"form",7),t.NdJ("ngSubmit",function(){t.CHM(o);const m=t.oxw();return t.KtG(m.onSubmit())}),t.TgZ(9,"fieldset")(10,"fieldset",8),t._UZ(11,"input",9),t.qZA(),t.TgZ(12,"fieldset",8),t._UZ(13,"input",10),t.qZA(),t.TgZ(14,"fieldset",8)(15,"textarea",11),t._uU(16,"              "),t.qZA()(),t.TgZ(17,"fieldset",8),t._UZ(18,"input",12),t.qZA(),t.TgZ(19,"fieldset",8),t._UZ(20,"input",13),t.qZA(),t.TgZ(21,"button",14),t.ALo(22,"async"),t._uU(23," Update Settings "),t.qZA()()(),t._UZ(24,"hr"),t.TgZ(25,"button",15),t.NdJ("click",function(){t.CHM(o);const m=t.oxw();return t.KtG(m.onLogout())}),t._uU(26,"Or click here to logout"),t.qZA()()()()()}if(2&e){const o=t.oxw();t.xp6(6),t.Q6J("ngIf",t.lcZ(7,3,o.backendErrors$)),t.xp6(2),t.Q6J("formGroup",o.form),t.xp6(13),t.Q6J("disabled",o.form.invalid||t.lcZ(22,5,o.isSubmitting$))}}let Z=(()=>{class e{constructor(o,a){this.fb=o,this.store=a}ngOnInit(){this.initializeListerners(),this.initializeValues()}initializeValues(){this.isSubmitting$=this.store.pipe((0,r.Ys)(d)),this.backendErrors$=this.store.pipe((0,r.Ys)(p))}initializeForm(){this.form=this.fb.group({image:this.currentUser.image,username:this.currentUser.username,bio:this.currentUser.bio,email:this.currentUser.email,password:""})}initializeListerners(){this.currentUserSubscription=this.store.pipe((0,r.Ys)(h.ib),(0,f.h)(Boolean)).subscribe(o=>{this.currentUser=o,this.initializeForm()})}onSubmit(){const o={...this.currentUser,...this.form.value};this.store.dispatch((0,l.xR)({currentUserInput:o}))}onLogout(){this.store.dispatch((0,b.C)())}ngOnDestroy(){this.currentUserSubscription.unsubscribe()}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(s.qu),t.Y36(r.yh))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-settings"]],decls:1,vars:1,consts:[["class","settings-page",4,"ngIf"],[1,"settings-page"],[1,"container","page"],[1,"row"],[1,"col-md-6","offset-md-3","col-xs-12"],[1,"text-xs-center"],[3,"backendErrors",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"form-group"],["formControlName","image","placeholder","URL of profile picture","type","text",1,"form-control"],["formControlName","username","placeholder","Username","type","text",1,"form-control","form-control-lg"],["formControlName","bio","placeholder","Short bio about you","rows","8",1,"form-control","form-control-lg"],["formControlName","email","placeholder","Email","type","email",1,"form-control","form-control-lg"],["formControlName","password","placeholder","New Password","type","password",1,"form-control","form-control-lg"],["type","submit",1,"btn","btn-lg","btn-primary","pull-xs-right",3,"disabled"],[1,"btn","btn-outline-danger",3,"click"],[3,"backendErrors"]],template:function(o,a){1&o&&t.YNc(0,U,27,7,"div",0),2&o&&t.Q6J("ngIf",a.currentUser)},dependencies:[c.O5,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,S.a,c.Ov]}),e})();var x=n(7002);const y=(0,r.Lq)({isSubmitting:!1,validationErrors:null},(0,r.on)(l.xR,e=>({...e,isSubmitting:!0})),(0,r.on)(l.ot,e=>({...e,isSubmitting:!1})),(0,r.on)(l.EU,(e,i)=>({...e,isSubmitting:!1,validationErrors:i.errors})));var E=n(6166);const A=[{path:"",component:Z,canMatch:[n(5473).p]}];let J=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[c.ez,s.UX,x.Bz.forChild(A),r.Aw.forFeature("settings",y),E.$]}),e})()}}]);